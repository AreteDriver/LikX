#!/usr/bin/make -f

%:
	dh $@

override_dh_auto_install:
	# Install application files
	install -d $(CURDIR)/debian/linux-sniptool/opt/linux-sniptool
	install -d $(CURDIR)/debian/linux-sniptool/opt/linux-sniptool/src
	install -d $(CURDIR)/debian/linux-sniptool/opt/linux-sniptool/resources
	install -d $(CURDIR)/debian/linux-sniptool/usr/bin
	install -d $(CURDIR)/debian/linux-sniptool/usr/share/applications
	install -d $(CURDIR)/debian/linux-sniptool/usr/share/icons/hicolor/scalable/apps
	install -d $(CURDIR)/debian/linux-sniptool/usr/share/icons/hicolor/256x256/apps

	# Copy application
	install -m 644 main.py $(CURDIR)/debian/linux-sniptool/opt/linux-sniptool/
	install -m 644 src/*.py $(CURDIR)/debian/linux-sniptool/opt/linux-sniptool/src/
	cp -r resources/* $(CURDIR)/debian/linux-sniptool/opt/linux-sniptool/resources/

	# Create launcher script
	echo '#!/bin/bash' > $(CURDIR)/debian/linux-sniptool/usr/bin/linux-sniptool
	echo 'cd /opt/linux-sniptool && exec python3 main.py "$$@"' >> $(CURDIR)/debian/linux-sniptool/usr/bin/linux-sniptool
	chmod 755 $(CURDIR)/debian/linux-sniptool/usr/bin/linux-sniptool

	# Desktop entry
	install -m 644 debian/linux-sniptool.desktop $(CURDIR)/debian/linux-sniptool/usr/share/applications/

	# Icons
	install -m 644 resources/icons/app_icon.svg $(CURDIR)/debian/linux-sniptool/usr/share/icons/hicolor/scalable/apps/linux-sniptool.svg
	install -m 644 resources/icons/sniptool-256.png $(CURDIR)/debian/linux-sniptool/usr/share/icons/hicolor/256x256/apps/linux-sniptool.png
