#!/usr/bin/make -f

%:
	dh $@

override_dh_auto_install:
	# Install application files
	install -d $(CURDIR)/debian/likx/opt/likx
	install -d $(CURDIR)/debian/likx/opt/likx/src
	install -d $(CURDIR)/debian/likx/opt/likx/resources
	install -d $(CURDIR)/debian/likx/usr/bin
	install -d $(CURDIR)/debian/likx/usr/share/applications
	install -d $(CURDIR)/debian/likx/usr/share/icons/hicolor/scalable/apps
	install -d $(CURDIR)/debian/likx/usr/share/icons/hicolor/256x256/apps

	# Copy application
	install -m 644 main.py $(CURDIR)/debian/likx/opt/likx/
	install -m 644 src/*.py $(CURDIR)/debian/likx/opt/likx/src/
	cp -r resources/* $(CURDIR)/debian/likx/opt/likx/resources/

	# Create launcher script
	echo '#!/bin/bash' > $(CURDIR)/debian/likx/usr/bin/likx
	echo 'cd /opt/likx && exec python3 main.py "$$@"' >> $(CURDIR)/debian/likx/usr/bin/likx
	chmod 755 $(CURDIR)/debian/likx/usr/bin/likx

	# Desktop entry
	install -m 644 debian/likx.desktop $(CURDIR)/debian/likx/usr/share/applications/

	# Icons
	install -m 644 resources/icons/likx.svg $(CURDIR)/debian/likx/usr/share/icons/hicolor/scalable/apps/likx.svg
	install -m 644 resources/icons/likx-256.png $(CURDIR)/debian/likx/usr/share/icons/hicolor/256x256/apps/likx.png
